{"ast":null,"code":"import { PeriodicElement } from '../models/periodic-element';\nimport * as FileSaver from 'file-saver';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/inspection-api.service\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"ngx-spinner\";\nimport * as i4 from \"primeng/toolbar\";\nimport * as i5 from \"primeng/button\";\nimport * as i6 from \"primeng/tooltip\";\nimport * as i7 from \"primeng/table\";\nimport * as i8 from \"primeng/inputtext\";\nimport * as i9 from \"@angular/common\";\n\nfunction DisplayInspectionComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function DisplayInspectionComponent_ng_template_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.exportExcel();\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DisplayInspectionComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"h5\", 13);\n    i0.ɵɵtext(2, \"Liste Facture\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 14);\n    i0.ɵɵelement(4, \"i\", 15);\n    i0.ɵɵelementStart(5, \"input\", 16);\n    i0.ɵɵlistener(\"input\", function DisplayInspectionComponent_ng_template_8_Template_input_input_5_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      i0.ɵɵnextContext();\n\n      const _r1 = i0.ɵɵreference(7);\n\n      return _r1.filterGlobal($event.target.value, \"contains\");\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction DisplayInspectionComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 17);\n    i0.ɵɵelement(2, \"p-tableHeaderCheckbox\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 18)(4, \"div\", 19);\n    i0.ɵɵtext(5, \" N\\u00B0Facture \");\n    i0.ɵɵelement(6, \"p-columnFilter\", 20)(7, \"p-sortIcon\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"th\", 22)(9, \"div\", 19);\n    i0.ɵɵtext(10, \" Soci\\u00E9t\\u00E9 \");\n    i0.ɵɵelement(11, \"p-columnFilter\", 23)(12, \"p-sortIcon\", 24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"th\", 25)(14, \"div\", 19);\n    i0.ɵɵtext(15, \" Client \");\n    i0.ɵɵelement(16, \"p-columnFilter\", 26)(17, \"p-sortIcon\", 27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"th\", 28)(19, \"div\", 19);\n    i0.ɵɵtext(20, \" Statut \");\n    i0.ɵɵelement(21, \"p-columnFilter\", 29)(22, \"p-sortIcon\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"th\")(24, \"div\", 19);\n    i0.ɵɵtext(25, \" Niveau \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"th\")(27, \"div\", 19);\n    i0.ɵɵtext(28, \" Date \");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction DisplayInspectionComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵelement(2, \"p-tableCheckbox\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const inspection_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", inspection_r10);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(inspection_r10.refNbr);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(inspection_r10.branchDescription);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(inspection_r10.customerDescription);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(inspection_r10.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", inspection_r10.senderLevel, \" -> \", inspection_r10.transmitterLevel, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(15, 8, inspection_r10.transmission_Date, \"dd/MM/yyyy HH:mm:ss\"), \" \");\n  }\n}\n\nfunction DisplayInspectionComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Au total il y a \", ctx_r5.inspectionList ? ctx_r5.inspectionList.length : 0, \" Enregistrements. \");\n  }\n}\n\nconst _c0 = function () {\n  return [\"refNbr\", \"branchDescription\", \"customerDescription\", \"status\", \"transmission_Date\"];\n};\n\nexport let DisplayInspectionComponent = /*#__PURE__*/(() => {\n  class DisplayInspectionComponent {\n    constructor(inspectionService, messageService, confirmationService, spinner) {\n      this.inspectionService = inspectionService;\n      this.messageService = messageService;\n      this.confirmationService = confirmationService;\n      this.spinner = spinner;\n      this.inspectionList = [];\n      this.periodicElement = new PeriodicElement();\n      this.isLoading = true;\n    }\n\n    ngOnInit() {\n      this.getInspectionList();\n      this.isLoading = false;\n    }\n\n    getInspectionList() {\n      this.spinner.show();\n      this.inspectionService.getInspectionList().subscribe(data => {\n        this.inspectionList = data;\n        this.spinner.hide();\n        console.log(\"INSPECTION DATA=\", this.inspectionList);\n      }, err => {\n        this.spinner.hide();\n        this.messageService.add({\n          severity: 'error',\n          summary: 'ERROR',\n          detail: 'ERROR GETTING INSPECTION LIST',\n          life: 3000\n        });\n        console.log(\"ERROR GETTING INSPECTION LIST\");\n      });\n    }\n\n    exportExcel() {\n      import(\"xlsx\").then(xlsx => {\n        const worksheet = xlsx.utils.json_to_sheet(this.inspectionList);\n        const workbook = {\n          Sheets: {\n            'data': worksheet\n          },\n          SheetNames: ['data']\n        };\n        const excelBuffer = xlsx.write(workbook, {\n          bookType: 'xlsx',\n          type: 'array'\n        });\n        this.saveAsExcelFile(excelBuffer, \"Factures\");\n      });\n    }\n\n    saveAsExcelFile(buffer, fileName) {\n      let EXCEL_TYPE = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\n      let EXCEL_EXTENSION = '.xlsx';\n      const data = new Blob([buffer], {\n        type: EXCEL_TYPE\n      });\n      FileSaver.saveAs(data, fileName + '_export_' + new Date().getTime() + EXCEL_EXTENSION);\n    }\n\n  }\n\n  DisplayInspectionComponent.ɵfac = function DisplayInspectionComponent_Factory(t) {\n    return new (t || DisplayInspectionComponent)(i0.ɵɵdirectiveInject(i1.InspectionApiService), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i2.ConfirmationService), i0.ɵɵdirectiveInject(i3.NgxSpinnerService));\n  };\n\n  DisplayInspectionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DisplayInspectionComponent,\n    selectors: [[\"app-display-inspection\"]],\n    decls: 12,\n    vars: 8,\n    consts: [[\"bdColor\", \"rgba(0, 0, 0, 0.8)\", \"size\", \"medium\", \"color\", \"#fff\", \"type\", \"square-loader\", 3, \"fullScreen\"], [2, \"color\", \"white\"], [1, \"card\"], [\"styleClass\", \"mb-4\"], [\"pTemplate\", \"right\"], [\"responsiveLayout\", \"scroll\", \"dataKey\", \"id\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"rows\", \"paginator\", \"globalFilterFields\", \"rowHover\", \"showCurrentPageReport\"], [\"dt\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"summary\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file-excel\", \"pTooltip\", \"XLS\", \"tooltipPosition\", \"bottom\", 1, \"p-button-success\", \"p-mr-2\", 3, \"click\"], [1, \"flex\", \"align-items-center\", \"justify-content-between\"], [1, \"m-0\"], [1, \"p-input-icon-left\"], [1, \"pi\", \"pi-search\"], [\"pInputText\", \"\", \"type\", \"text\", \"placeholder\", \"Search...\", 3, \"input\"], [2, \"width\", \"3rem\"], [\"pSortableColumn\", \"refNbr\"], [1, \"p-d-flex\", \"p-jc-between\", \"p-ai-center\"], [\"type\", \"text\", \"field\", \"refNbr\", \"display\", \"menu\"], [\"field\", \"refNbr\"], [\"pSortableColumn\", \"branchDescription\"], [\"type\", \"text\", \"field\", \"branchDescription\", \"display\", \"menu\"], [\"field\", \"branchDescription\"], [\"pSortableColumn\", \"customerDescription\"], [\"type\", \"text\", \"field\", \"customerDescription\", \"display\", \"menu\"], [\"field\", \"customerDescription\"], [\"pSortableColumn\", \"status\"], [\"type\", \"text\", \"field\", \"status\", \"display\", \"menu\"], [\"field\", \"status\"], [3, \"value\"]],\n    template: function DisplayInspectionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ngx-spinner\", 0)(1, \"p\", 1);\n        i0.ɵɵtext(2, \"Chargement...\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"p-toolbar\", 3);\n        i0.ɵɵtemplate(5, DisplayInspectionComponent_ng_template_5_Template, 1, 0, \"ng-template\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"p-table\", 5, 6);\n        i0.ɵɵtemplate(8, DisplayInspectionComponent_ng_template_8_Template, 6, 0, \"ng-template\", 7);\n        i0.ɵɵtemplate(9, DisplayInspectionComponent_ng_template_9_Template, 29, 0, \"ng-template\", 8);\n        i0.ɵɵtemplate(10, DisplayInspectionComponent_ng_template_10_Template, 16, 11, \"ng-template\", 9);\n        i0.ɵɵtemplate(11, DisplayInspectionComponent_ng_template_11_Template, 2, 1, \"ng-template\", 10);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"fullScreen\", true);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"value\", ctx.inspectionList)(\"rows\", 10)(\"paginator\", true)(\"globalFilterFields\", i0.ɵɵpureFunction0(7, _c0))(\"rowHover\", true)(\"showCurrentPageReport\", true);\n      }\n    },\n    directives: [i3.NgxSpinnerComponent, i4.Toolbar, i2.PrimeTemplate, i5.ButtonDirective, i6.Tooltip, i7.Table, i8.InputText, i7.TableHeaderCheckbox, i7.SortableColumn, i7.ColumnFilter, i7.SortIcon, i7.TableCheckbox],\n    pipes: [i9.DatePipe],\n    styles: [\"\"]\n  });\n  return DisplayInspectionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}